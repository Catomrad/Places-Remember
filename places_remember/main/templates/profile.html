<html>
<head>
    <title>Profile</title>
    <style>
        #map {
            height: 400px;
            width: 800px;
        }
    </style>
</head>
<body>
    <h2>Welcome, {{ request.user.username }}</h2>
    <h3>Your Memories:</h3>
    <ul>
        {% for memory in memories %}
            <li>{{ memory.title }} - {{ memory.description }}, {{ memory.latitude }}, {{ memory.longitude }}</li>
        {% endfor %}
    </ul>
    <a href="{% url 'add_memory' %}">Добавить воспоминание</a>

    <h3>Your Memories Map:</h3>
    <div id="map" data-coordinates="{{ coordinates|safe }}"></div>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRulCyhPSBC0HkXRYZnkzdHSGcHgH35Sw&callback=initMap">
    </script>
    <script>
            var map;
    var markers = [];
    var coordinates = [
        // Вставьте здесь список координат широты и долготы
        {% for memory in memories %}
            [{{ memory.latitude }}, {{ memory.longitude }}],
        {% endfor %}
    ];

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: 56.042639, lng: 92.838818},
            zoom: 5
        });

        for (var i = 0; i < coordinates.length; i++) {
            var latLng = new google.maps.LatLng(coordinates[i][0], coordinates[i][1]);
            var marker = new google.maps.Marker({
                position: latLng,
                map: map
            });
            markers.push(marker);
        }
    }

    function placeMarker(location) {
        clearMarkers();
        var marker = new google.maps.Marker({
            position: location,
            map: map
        });
        markers.push(marker);
    }

    function clearMarkers() {
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(null);
        }
        markers = [];
    }

    </script>
</body>
</html>